<html>
<body>
    <div class="title">Synesthesia</div>
    <canvas id="canvas"></canvas>
    <div class="controls">
        <button id="uploadBtn">Upload Music</button>
        <button id="playPauseBtn" style="display: none;">Play</button>
    </div>
    <input type="file" id="fileInput" accept="audio/*">

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const uploadBtn = document.getElementById('uploadBtn');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const fileInput = document.getElementById('fileInput');

        let audioContext, analyser, source;
        let isPlaying = false;
        let particles = [];

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 5 + 2;
                this.speedX = Math.random() * 3 - 1.5;
                this.speedY = Math.random() * 3 - 1.5;
                this.color = `hsl(${Math.random() * 360}, 100%, 50%)`;
            }
